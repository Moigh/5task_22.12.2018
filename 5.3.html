<!DOCTYPE html>
<html>
	<head>
		<title>Moigh</title>
		<link rel="shortcut icon" href="icon.png">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script src="js/scripts.js"></script>
		<style>
			li * li * li * li{
				color: #6666ff;
			}
			li * li * li{
				color: #cc33ff;
			}
			li * li{
				color: #ff33cc;
			}
			li{
				color: #ff0066;
			}
			@font-face{
				font-family:helvetica;
				src: url(helvetica.ttf);
			}
			body *{		
	            font-family:helvetica;
				font-size:15px;
				margin:10px;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
			var m = [
				{
					text: 'Животные',
					childs: [
						{
							text: 'Млекопитающие',
							childs: [
								'Коровы',
								'Ослы',
								'Собаки',
								'Тигры'
							]
						},
						{
							text: 'Рыбы',
							childs: [
								{
									text: 'Аквариумные',
									childs: [
										'Гуппи',
										'Скалярии'
									]
								},
								{
									text: 'Морские',
									childs: [
										'Морская форель'
									]
								}
							]
						}
					]
				},
				{
					text: 'Растения',
					childs: [
						{
							text: 'Водоросли',
							childs: [
								'Зелёные',
								'Харофиты'
							]
						},
						{
							text: 'Семенные растения',
							childs: [
								'Хвойные',
								'Цветковые',
								'Гинкговидные'
							]
						}
					]
				}
			]
			function Make(elem) {	
				let ul = $('<ul/>')
				for (let child of elem) {
					let li = $('<li/>')
					if (child.text !== undefined) 
						li.append(child.text)
					if (typeof child !== 'object')
						li.append(child)
					else if (child.childs !== undefined) 
						li.append(Make(child.childs))
					li.on('click', function(e) {
						e.preventDefault()
						$(this.firstElementChild).slideToggle()
						console.log(this.firstChild.data, $(this).find("li").length)
						return false
					})
					ul.append(li)
				}
				return ul
			}
			$("body").append(Make(m))
		</script>
	</body>
</html>